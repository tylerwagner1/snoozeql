---
status: testing
phase: quick-003-implement-metrics-backfill
source: 003-SUMMARY.md
started: 2026-02-26T19:45:00Z
updated: 2026-02-26T19:46:00Z
---

## Current Test

number: 1
name: BackfillMetrics method works correctly
expected: |
  When calling the BackfillMetrics method, it should:
  1. Iterate backward from current time to the requested number of days
  2. For each hour, check if data already exists before collecting
  3. Collect CloudWatch metrics for that specific hour
  4. Self-throttle with 100ms between hour requests
  5. Return count of hours backfilled
  6. Fill gaps with last known values when application resumes after downtime
awaiting: user response

## Tests

### 1. BackfillMetrics method works correctly
expected: Method iterates backward, checks existing data, collects metrics, self-throttles with 100ms, returns hour count
result: issue
reported: "Backfill happens at hourly granularity, user expects 15-minute intervals"
severity: major

### 2. API endpoint triggers backfill
expected: POST /api/v1/instances/{id}/metrics/backfill?days=N triggers backfill with configurable days parameter (max 7)
result: [pending]

### 3. Gaps are filled with last known values
expected: When application restarts after downtime, backfill fills gaps with last known metric values (or zero if instance was stopped)
result: [pending]

### 4. Hours with existing data are skipped
expected: Hours that already have metrics are not overwritten to avoid duplicate collection
result: [pending]

### 5. Only AWS instances supported
expected: Non-AWS instances receive 400 error with helpful message about GCP not yet supported
result: [pending]

## Summary

total: 5
passed: 0
issues: 1
pending: 4
skipped: 0

## Gaps

- truth: "Backfill fills gaps with 15-minute interval entries"
  status: failed
  reason: "User expects 15-minute intervals, but implementation uses hourly granularity"
  severity: major
  test: 1
  artifacts: []
  missing: []
  root_cause: "Implementation collects one metric per hour, not one per 15 minutes"
  debug_session: ""
